{
	"info": {
		"_postman_id": "tindertrip-api-updated",
		"name": "TinderTrip API - Updated",
		"description": "Complete API collection for TinderTrip Backend with all endpoints including OTP, Food Preferences, Travel Preferences, and Event Management",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\",\n  \"display_name\": \"Test User\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "register"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Register now sends OTP instead of creating user immediately",
									"pm.test('Registration sends OTP', function () {",
									"    pm.response.to.have.status(200);",
									"    pm.expect(pm.response.json().message).to.include('OTP sent');",
									"});"
								]
							}
						}
					]
				},
				{
					"name": "Verify Email",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\",\n  \"display_name\": \"Test User\",\n  \"otp\": \"123456\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/verify-email",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "verify-email"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response && pm.response.json() && pm.response.json().token) {",
									"    pm.collectionVariables.set('token', pm.response.json().token);",
									"    pm.collectionVariables.set('user_id', pm.response.json().user.id);",
									"}"
								]
							}
						}
					]
				},
				{
					"name": "Resend Verification OTP",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"test@example.com\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/resend-verification",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "resend-verification"]
						}
					}
				},
				{
					"name": "Login",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "login"]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response && pm.response.json() && pm.response.json().data && pm.response.json().data.access_token) {",
									"    pm.collectionVariables.set('token', pm.response.json().data.access_token);",
									"    pm.collectionVariables.set('user_id', pm.response.json().data.user.id);",
									"}"
								]
							}
						}
					]
				},
				{
					"name": "Google Auth",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/api/v1/auth/google",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "google"]
						}
					}
				},
				{
					"name": "Forgot Password (OTP)",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"test@example.com\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/forgot-password",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "forgot-password"]
						}
					}
				},
				{
					"name": "Verify OTP",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"test@example.com\",\n  \"otp\": \"123456\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/verify-otp",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "verify-otp"]
						}
					}
				},
				{
					"name": "Reset Password",
					"request": {
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"test@example.com\",\n  \"otp\": \"123456\",\n  \"password\": \"newpassword123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/reset-password",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "auth", "reset-password"]
						}
					}
				}
			]
		},
		{
			"name": "User Profile",
			"item": [
				{
					"name": "Get Profile",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
						"url": {
							"raw": "{{base_url}}/api/v1/users/profile",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "users", "profile"]
						}
					}
				},
				{
					"name": "Update Profile",
					"request": {
						"method": "PUT",
						"header": [
							{"key": "Authorization", "value": "Bearer {{token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"display_name\": \"Updated Name\",\n  \"bio\": \"Updated bio\",\n  \"languages\": [\"th\", \"en\"],\n  \"date_of_birth\": \"1990-01-01\",\n  \"gender\": \"male\",\n  \"job_title\": \"Developer\",\n  \"smoking\": \"no\",\n  \"interests_note\": \"Travel, Food, Technology\",\n  \"avatar_url\": \"https://example.com/avatar.jpg\",\n  \"home_location\": \"Bangkok, Thailand\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/users/profile",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "users", "profile"]
						}
					}
				}
			]
		},
		{
			"name": "Food Preferences",
			"item": [
				{
					"name": "Get Food Preferences",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
						"url": {
							"raw": "{{base_url}}/api/v1/users/food-preferences",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "users", "food-preferences"]
						}
					}
				},
				{
					"name": "Update Food Preference",
					"request": {
						"method": "PUT",
						"header": [
							{"key": "Authorization", "value": "Bearer {{token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"food_category\": \"thai_food\",\n  \"preference_level\": 3\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/users/food-preferences",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "users", "food-preferences"]
						}
					}
				},
				{
					"name": "Update All Food Preferences",
					"request": {
						"method": "PUT",
						"header": [
							{"key": "Authorization", "value": "Bearer {{token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"preferences\": [\n    {\"food_category\": \"thai_food\", \"preference_level\": 3},\n    {\"food_category\": \"japanese_food\", \"preference_level\": 2},\n    {\"food_category\": \"chinese_food\", \"preference_level\": 1}\n  ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/users/food-preferences/bulk",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "users", "food-preferences", "bulk"]
						}
					}
				},
				{
					"name": "Get Food Categories",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
						"url": {
							"raw": "{{base_url}}/api/v1/users/food-preferences/categories",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "users", "food-preferences", "categories"]
						}
					}
				}
			]
		},
		{
			"name": "Travel Preferences",
			"item": [
				{
					"name": "Get Travel Preferences",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
						"url": {
							"raw": "{{base_url}}/api/v1/users/travel-preferences",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "users", "travel-preferences"]
						}
					}
				},
				{
					"name": "Add Travel Preference",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Authorization", "value": "Bearer {{token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"travel_style\": \"adventure\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/users/travel-preferences",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "users", "travel-preferences"]
						}
					}
				},
				{
					"name": "Update All Travel Preferences",
					"request": {
						"method": "PUT",
						"header": [
							{"key": "Authorization", "value": "Bearer {{token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"travel_styles\": [\"adventure\", \"cultural\", \"relaxation\"]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/users/travel-preferences/bulk",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "users", "travel-preferences", "bulk"]
						}
					}
				},
				{
					"name": "Get Travel Styles",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
						"url": {
							"raw": "{{base_url}}/api/v1/users/travel-preferences/styles",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "users", "travel-preferences", "styles"]
						}
					}
				}
			]
		},
		{
			"name": "Events",
			"item": [
				{
					"name": "Get Events",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
						"url": {
							"raw": "{{base_url}}/api/v1/events?page=1&limit=10&status=published",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "events"],
							"query": [
								{"key": "page", "value": "1"},
								{"key": "limit", "value": "10"},
								{"key": "status", "value": "published"}
							]
						}
					}
				},
				{
					"name": "Create Event",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Authorization", "value": "Bearer {{token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"Dinner at Central World\",\n  \"description\": \"Let's have dinner together at Central World\",\n  \"event_type\": \"meal\",\n  \"address_text\": \"Central World, Bangkok\",\n  \"lat\": 13.7473,\n  \"lng\": 100.5396,\n  \"start_at\": \"2024-12-01T18:00:00Z\",\n  \"end_at\": \"2024-12-01T20:00:00Z\",\n  \"capacity\": 4\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/events",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "events"]
						}
					}
				},
				{
					"name": "Get Event Details",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
						"url": {
							"raw": "{{base_url}}/api/v1/events/{{event_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "events", "{{event_id}}"]
						}
					}
				},
				{
					"name": "Swipe Event (Like)",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Authorization", "value": "Bearer {{token}}"},
							{"key": "Content-Type", "value": "application/json"}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"event_id\": \"{{event_id}}\",\n  \"direction\": \"like\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/events/{{event_id}}/swipe",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "events", "{{event_id}}", "swipe"]
						}
					}
				},
				{
					"name": "Confirm Event Participation",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
						"url": {
							"raw": "{{base_url}}/api/v1/events/{{event_id}}/confirm",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "events", "{{event_id}}", "confirm"]
						}
					}
				},
				{
					"name": "Cancel Event Participation",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
						"url": {
							"raw": "{{base_url}}/api/v1/events/{{event_id}}/cancel",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "events", "{{event_id}}", "cancel"]
						}
					}
				},
				{
					"name": "Complete Event",
					"request": {
						"method": "POST",
						"header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
						"url": {
							"raw": "{{base_url}}/api/v1/events/{{event_id}}/complete",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "events", "{{event_id}}", "complete"]
						}
					}
				},
				{
					"name": "Get Event Suggestions",
					"request": {
						"method": "GET",
						"header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
						"url": {
							"raw": "{{base_url}}/api/v1/events/suggestions?page=1&limit=10",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "events", "suggestions"],
							"query": [
								{"key": "page", "value": "1"},
								{"key": "limit", "value": "10"}
							]
						}
					}
				}
			]
		},
		{
			"name": "Health Check",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/health",
							"host": ["{{base_url}}"],
							"path": ["health"]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:9952",
			"type": "string"
		},
		{
			"key": "token",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "event_id",
			"value": "",
			"type": "string"
		}
	]
}
